function calendarEvent(e){var n,o
for(n in db.conferences)n===e.toLowerCase().trim()&&(o=db.conferences[n],cal=ics(),cal.addEvent(o.title,o.full_title,o.location,o.submission,o.submission),cal.download(),console.log("FOIUDNT "))}function arrayObjectIndexOf(e,n,o){for(var t=0,r=e.length;r>t;t++)if(void 0!=e[t]&&e[t][o]===n)return t
return-1}function onlyUnique(e,n,o){return o.indexOf(e)===n}function makeMarker(e){var n,o,t,r,c=e.title.toLowerCase().match(/\w+/)[0]
return void 0!=staticConferenceDB[c]?(o=staticConferenceDB[c],t="(<b>Type:</b> "+o.type+", <b>Ranking:</b> "+o.ranking+", <b>Tier:</b> "+o.tier+")",n="A"===o.tier?"TOP":"B"===o.tier?"GOOD":"C"===o.tier?"OK":"Unknown"!=o.ranking?"KNOWN":"UNKNOWN"):(n="UNKNOWN",t="(<b>Type:</b> Unknown, <b>Ranking:</b> Unknown, <b>Tier:</b> Unknown)"),r='<table class="infoboks table"><tbody><tr><td class="ik">Title</td><td>'+e.title+'</td></tr><tr><td class="ik">Full Title</td><td>'+e.full_title+'</td></tr><tr><td class="ik">Deadline</td><td>'+e.submission+'</td></tr><tr><td class="ik">Location</td><td>'+e.location+'</td></tr><tr><td class="ik">Date</td><td>'+e.date+'</td></tr><tr><td class="ik">URL</td><td><a target="_blank" href="'+e.url+'">LINK</a></td></tr><tr><td class="ik">Event</td><td><a href="javascript:void(0)" onclick="javascript:calendarEvent(\''+e.title+'\')">Add to Calendar</a></td></tr><tr><td class="ik">Categories</td><td>'+e.categories+"</td></tr></tbody></table>",0==e.lat&&0==e.lng?(e.contents=r,void addToList(e)):new google.maps.Marker({position:e.geoLocation,icon:"https://maps.google.com/mapfiles/ms/icons/"+icons[n],title:e.title.trim().toLowerCase(),desc:r})}function placeMarkers(){var e,n
newMarkers=[],e=oms.getMarkers(),$("#e1").select2("val").forEach(function(e){e.split(",").forEach(function(e){for(var o in db.conferences)conference=db.conferences[o],~db.conferences[o].categories.indexOf(e)&&(conf_location=conference.location.toLowerCase(),n="Conference",("n/a"===conf_location||"publication"===conf_location||"online"===conf_location)&&(n="Journal"),conference.geoLocation=new google.maps.LatLng(conference.lat,conference.lng),conference.type=n,newMarkers.push(makeMarker(conference)))})}),$("#e2").select2("val").forEach(function(e){conference=db.conferences[e.toLowerCase()],conf_location=conference.location.toLowerCase(),n="Conference",("n/a"===conf_location||"publication"===conf_location||"online"===conf_location)&&(n="Journal"),conference.geoLocation=new google.maps.LatLng(conference.lat,conference.lng),conference.type=n,newMarkers.push(makeMarker(conference))}),$("#e3").select2("val").forEach(function(e){var o,t
for(o in db.conferences)t=db.conferences[o],t.country===e&&(conf_location=t.location.toLowerCase(),n="Conference",("n/a"===conf_location||"publication"===conf_location||"online"===conf_location)&&(n="Journal"),t.geoLocation=new google.maps.LatLng(t.lat,t.lng),t.type=n,newMarkers.push(makeMarker(t)))}),newMarkers.filter(function(e){return void 0!=e?arrayObjectIndexOf(markers,e.title,"title")<0:void 0}).forEach(function(e){e.setAnimation(google.maps.Animation.DROP),e.setMap(map),markers.push(e),oms.addMarker(e)}),markers.filter(function(e){return void 0!=e?arrayObjectIndexOf(newMarkers,e.title,"title")<0:void 0}).forEach(function(e){e.setMap(null),delete markers[arrayObjectIndexOf(markers,e.title,"title")],oms.removeMarker(e)})}function addToList(e){var n,o=!0
$("#cool div label").each(function(){var n=$(this)
return n.text().toLowerCase().trim()===e.title.toLowerCase().trim()?void(o=!1):void 0}),o&&(n=$("Conference"===e.type?"#stranded_confs":"#stranded_journals"),n.append($("<label>").attr("class","list-group-item").append($("<a>").attr("target","_blank").append(e.title)).click(function(){$.colorbox({html:e.contents})}))),$("#cool").show()}function initialize(){var e,n=document.getElementById("map_canvas"),o={center:new google.maps.LatLng(38.15016,12.728289),zoom:4,mapTypeId:google.maps.MapTypeId.ROADMAP}
map=new google.maps.Map(n,o),oms=new OverlappingMarkerSpiderfier(map,{keepSpiderfied:!0,circleSpiralSwitchover:1/0,markersWontMove:!0,markersWontHide:!0}),e=new google.maps.InfoWindow,oms.addListener("click",function(n){e.setContent(n.desc),e.open(map,n)})}var db,staticConferenceDB,cal,map,oms,markers=[],icons={UNKNOWN:"pink.png",KNOWN:"blue.png",OK:"yellow.png",GOOD:"orange.png",TOP:"green.png"}
$(document).ready(function(){google.maps.event.addDomListener(window,"load",initialize),$("#inline-faq").click(function(){$.colorbox({href:"faq.html"})}),$("#e1").select2({placeholder:"Enter a Category",allowClear:!0}),$("#e2").select2({placeholder:"Enter a Conference",allowClear:!0}).on("select2-removing",function(e){$("#cool div label").each(function(){var n=$(this)
return n.text().toLowerCase().trim()===e.val.toLowerCase().trim()?(n.remove(),!1):void 0})}),$("#e3").select2({placeholder:"Enter a Country",allowClear:!0}),$.getJSON("db.json",function(e){var n,o,t
db=e,$("#last_updated").html(db.last_updated.split(" ")[0]),selector2=$("#e2"),countrySelector=$("#e3"),n=[],o=0
for(t in db.conferences)selector2.append(new Option(db.conferences[t].title,db.conferences[t].title)),o+=1,country=db.conferences[t].country,void 0!=country&&"Unknown"!=country&&n.push(country)
n.filter(onlyUnique).forEach(function(e){countrySelector.append(new Option(e,e))}),$("#conference_count").html(o)}),$.getJSON("ui-categories.json",function(e){selector1=$("#e1")
for(var n in e.categories)selector1.append(new Option(n,e.categories[n]))}),$.getJSON("conference-repo.json",function(e){staticConferenceDB=e.conferences}),$("#e1").click(function(){$("#cool div").empty(),placeMarkers(),0==$("#cool div label").length&&$("#cool").hide()}),$("#e2").click(function(){placeMarkers(),0==$("#cool div label").length&&$("#cool").hide()}),$("#e3").click(function(){placeMarkers(),0==$("#cool div label").length&&$("#cool").hide()}),$("#listClose").click(function(){$("#cool").hide()})})